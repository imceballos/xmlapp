<!DOCTYPE html>
<html>
<head>
	<title>Form Example</title>
	<style>
		h1 {
			text-align: center;
			margin-bottom: 20px;
		}
		form {
			max-width: 800px;
			margin: 0 auto;
			display: flex;
			flex-wrap: wrap;
			align-items: flex-start;
			justify-content: center;
		}
		label {
			display: block;
			margin-bottom: 5px;
			font-size: 16px;
		}
		input, select {
			width: 100%;
			padding: 8px 10px;
			margin-bottom: 15px;
			border-radius: 5px;
			border: 1px solid #ccc;
			font-size: 16px;
		}
		input[type="submit"] {
			background-color: #4CAF50;
			color: white;
			cursor: pointer;
			transition: all 0.3s ease-in-out;
		}
		input[type="submit"]:hover {
			background-color: #3e8e41;
		}
	</style>
</head>
<body>
	<h1>Form Example</h1>
	<form method="POST" action="/formpost">
		<label for="options">Choose an option:</label>
		<select id="options" name="options">
			<option value="a">CW1_REQUEST_XUD_TIMESTAMP</option>
			<option value="b">MESSAGE_XUD_DTYPE_TB_TIMESTAMP</option>
		</select>
		<div id="form-container">
			<!-- Form for Option CW1_REQUEST_XUD_TIMESTAMP -->
			<div id="form-a" class="form-group">
				<label for="input-a-0">Filename:</label>
				<input type="text" id="input-a-0" name="input-a-0"><br>
				<label for="input-a-1">Data Target Type:</label>
				<input type="text" id="input-a-1" name="input-a-1"><br>
				<label for="input-a-2">Data Target Key:</label>
				<input type="text" id="input-a-2" name="input-a-2"><br>
				<label for="input-a-3">Company Code:</label>
				<input type="text" id="input-a-3" name="input-a-3"><br>
				<label for="input-a-4">Filter Type:</label>
				<input type="text" id="input-a-4" name="input-a-4"><br>
				<label for="input-a-5">Filter Value:</label>
				<input type="text" id="input-a-5" name="input-a-5"><br>
				<label for="input-a-6">Enterprise ID:</label>
				<input type="text" id="input-a-6" name="input-a-6"><br>
				<label for="input-a-7">Server ID:</label>
				<input type="text" id="input-a-7" name="input-a-7"><br>
			</div>
			<!-- Form for Option MESSAGE_XUD_DTYPE_TB_TIMESTAMP -->
			<div id="form-b" class="form-group">
				<label for="input-b-0">Filename:</label>
				<input type="text" id="input-b-0" name="input-b-0"><br>
				<label for="input-b-1">Status:</label>
				<input type="text" id="input-b-1" name="input-b-1"><br>
				<label for="input-b-2">DataSource Type:</label>
				<input type="text" id="input-b-2" name="input-b-2"><br>
				<label for="input-b-3">DataSource Key:</label>
				<input type="text" id="input-b-3" name="input-b-3"><br>
				<label for="input-b-4">Company Code:</label>
				<input type="text" id="input-b-4" name="input-b-4"><br>
				<label for="input-b-5">Company Name:</label>
				<input type="text" id="input-b-5" name="input-b-5"><br>
				<label for="input-b-6">Company Country Code:</label>
				<input type="text" id="input-b-6" name="input-b-6"><br>
				<label for="input-b-7">Company Country Name:</label>
				<input type="text" id="input-b-7" name="input-b-7"><br>
				<label for="input-b-8">Event Time:</label>
				<input type="text" id="input-b-8" name="input-b-8"><br>
				<label for="input-b-9">Event Type:</label>
				<input type="text" id="input-b-9" name="input-b-9"><br>
				<label for="input-b-10">Is Estimate:</label>
				<input type="text" id="input-b-10" name="input-b-10"><br>
				<label for="input-b-11">Filename:</label>
				<input type="text" id="input-b-11" name="input-b-11"><br>
				<label for="input-b-12">ImageData:</label>
				<input type="text" id="input-b-12" name="input-b-12"><br>
				<label for="input-b-13">Document Type Code:</label>
				<input type="text" id="input-b-13" name="input-b-13"><br>
				<label for="input-b-14">Document Type Description:</label>
				<input type="text" id="input-b-14" name="input-b-14"><br>
				<label for="input-b-15">Document ID:</label>
				<input type="text" id="input-b-15" name="input-b-15"><br>
				<label for="input-b-16">Is Published:</label>
				<input type="text" id="input-b-16" name="input-b-16"><br>
				<label for="input-b-17">Save Date UTC:</label>
				<input type="text" id="input-b-17" name="input-b-17"><br>
				<label for="input-b-18">Document Saved By Code:</label>
				<input type="text" id="input-b-18" name="input-b-18"><br>
				<label for="input-b-19">Document Saved By Name:</label>
				<input type="text" id="input-b-19" name="input-b-19"><br>
			</div>
		</div>
		<input type="submit" value="Submit">
	</form>

	<script>
		// Hide all forms initially
		document.querySelectorAll('.form-group').forEach(form => form.style.display = 'none');

		
		// Show the selected form
		document.querySelector('#options').addEventListener('change', function() {
			const selectedOption = this.value;
			document.querySelectorAll('.form-group').forEach(form => form.style.display = 'none');
			document.querySelector(`#form-${selectedOption}`).style.display = 'block';
		});

		// Submit form data to FastAPI endpoint
	const form = document.querySelector('form');
	form.addEventListener('submit', async event => {
		event.preventDefault();
		const formData = new FormData(form);
		const options = formData.get('options');
		const url = '/formpost';
		const body = {};
		if (options === 'a') {
			const formGroup = document.querySelector('#form-a');
  			const inputCount = formGroup.querySelectorAll('input').length;
			for (let i = 0; i < inputCount; i++) {
				const inputName = `input-a-${i}`;
				body[`input_a_${i}`] = formData.get(inputName);
			}
		} else if (options === 'b') {
			const formGroup = document.querySelector('#form-b');
  			const inputCount = formGroup.querySelectorAll('input').length;
			for (let i = 0; i < inputCount; i++) {
				const inputName = `input-b-${i}`;
				body[`input_a_${i}`] = formData.get(inputName);
			}
		}
		try {
			const response = await fetch(url, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(body)
			});
			const result = await response.json();
			console.log(result);
		} catch (error) {
			console.error(error);
		}
	});
	</script>
</body>
</html>
